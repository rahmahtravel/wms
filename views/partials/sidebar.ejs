<!-- Modern Sidebar with Custom Styles -->
<style>
  /* Custom Sidebar Animations */
  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-10px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Modern Sidebar Styles */
  #sidebar {
    background: linear-gradient(180deg, #ffffff 0%, #f8f9fa 100%);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Custom Scrollbar */
  #sidebar::-webkit-scrollbar {
    width: 6px;
  }
  
  #sidebar::-webkit-scrollbar-track {
    background: transparent;
  }
  
  #sidebar::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #fb923c, #f97316);
    border-radius: 10px;
  }
  
  #sidebar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #f97316, #ea580c);
  }

  /* Menu Item Styles */
  .sidebar-item {
    position: relative;
    display: flex;
    align-items: center;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 12px;
    margin: 4px 12px;
    padding: 14px 18px !important;
    animation: slideInLeft 0.5s ease forwards;
    opacity: 0;
    text-decoration: none;
    color: #475569;
    font-weight: 500;
  }

  .sidebar-item:nth-child(1) { animation-delay: 0.05s; }
  .sidebar-item:nth-child(2) { animation-delay: 0.1s; }
  .sidebar-item:nth-child(3) { animation-delay: 0.15s; }
  .sidebar-item:nth-child(4) { animation-delay: 0.2s; }
  .sidebar-item:nth-child(5) { animation-delay: 0.25s; }
  .sidebar-item:nth-child(6) { animation-delay: 0.3s; }
  .sidebar-item:nth-child(7) { animation-delay: 0.35s; }
  .sidebar-item:nth-child(8) { animation-delay: 0.4s; }
  .sidebar-item:nth-child(9) { animation-delay: 0.45s; }
  .sidebar-item:nth-child(10) { animation-delay: 0.5s; }

  .sidebar-item:hover {
    background: #fff7ed;
    transform: translateX(4px);
    color: #ea580c;
    box-shadow: 0 2px 8px rgba(251, 146, 60, 0.15);
  }

  .sidebar-item:hover i {
    color: #ea580c !important;
  }

  .sidebar-item:hover span {
    color: #ea580c !important;
  }

  .sidebar-item.active {
    background: #fb923c;
    color: white !important;
    transform: translateX(4px);
    box-shadow: 0 3px 10px rgba(251, 146, 60, 0.4);
  }

  .sidebar-item.active::before {
    content: '';
    position: absolute;
    left: -12px;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 60%;
    background: linear-gradient(180deg, #fb923c, #f97316);
    border-radius: 0 4px 4px 0;
    box-shadow: 0 0 10px rgba(251, 146, 60, 0.5);
  }

  .sidebar-item.active i,
  .sidebar-item.active span {
    color: white !important;
  }

  .sidebar-item i {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: all 0.3s ease;
  }

  .sidebar-item:hover i {
    transform: scale(1.1);
  }

  .sidebar-item.active i {
    transform: scale(1.15);
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
  }

  /* Section Headers */
  .sidebar-section-header {
    padding: 12px 20px 8px 20px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    color: #9ca3af;
    margin-top: 20px;
    position: relative;
    animation: fadeIn 0.6s ease;
  }

  .sidebar-section-header::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 20px;
    right: 20px;
    height: 2px;
    background: linear-gradient(90deg, #fb923c 0%, transparent 100%);
    border-radius: 2px;
  }

  /* Icon Colors for Transaction Items */
  .icon-green { color: #10b981 !important; }
  .icon-red { color: #ef4444 !important; }
  .icon-blue { color: #3b82f6 !important; }
  .icon-purple { color: #a855f7 !important; }
  
  .sidebar-item.active .icon-green,
  .sidebar-item.active .icon-red,
  .sidebar-item.active .icon-blue,
  .sidebar-item.active .icon-purple {
    color: white !important;
  }

  /* Responsive Design */
  @media (max-width: 1024px) {
    #sidebar {
      transform: translateX(-100%);
    }
    
    #sidebar.mobile-open {
      transform: translateX(0);
      box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
    }
  }

  @media (max-width: 768px) {
    #sidebar {
      width: 280px;
      z-index: 1000;
    }
  }

  /* Desktop - Always Show Sidebar */
  @media (min-width: 1024px) {
    #sidebar {
      transform: translateX(0) !important;
    }
  }

  /* Dropdown Styles */
  .sidebar-dropdown {
    position: relative;
    margin: 8px 0;
  }

  .sidebar-dropdown-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 20px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    color: #64748b;
    margin: 12px 0 0 0;
    cursor: pointer;
    transition: all 0.3s ease;
    user-select: none;
    border-radius: 8px;
    background: #f8fafc;
    border-left: 4px solid transparent;
  }

  .sidebar-dropdown-header:hover {
    color: #fb923c;
    background: #fff7ed;
    border-left-color: #fb923c;
    transform: translateX(4px);
  }

  .sidebar-dropdown.open .sidebar-dropdown-header {
    background: #fb923c;
    color: white;
    border-left-color: #ea580c;
    box-shadow: 0 2px 8px rgba(251, 146, 60, 0.3);
  }

  .sidebar-dropdown.open .sidebar-dropdown-header i,
  .sidebar-dropdown.open .sidebar-dropdown-header span,
  .sidebar-dropdown.open .sidebar-dropdown-header .sidebar-dropdown-arrow {
    color: white !important;
  }

  .sidebar-dropdown-arrow {
    transition: transform 0.3s ease;
    font-size: 12px;
    color: #64748b;
    font-weight: 600;
  }

  .sidebar-dropdown.open .sidebar-dropdown-arrow {
    transform: rotate(180deg);
    color: white !important;
  }

  .sidebar-dropdown-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    background: rgba(251, 146, 60, 0.02);
    margin: 0 12px;
    border-radius: 0 0 8px 8px;
  }

  .sidebar-dropdown.open .sidebar-dropdown-content {
    max-height: 500px;
    padding: 8px 0;
  }

  .sidebar-dropdown.open .sidebar-dropdown-content .sidebar-item {
    margin: 2px 8px;
    border-radius: 6px;
  }

  .sidebar-dropdown-header i {
    font-size: 14px;
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>

<script>
// Sidebar Dropdown Functionality
function initSidebarDropdowns() {
  const dropdowns = document.querySelectorAll('.sidebar-dropdown');
  
  dropdowns.forEach(dropdown => {
    const header = dropdown.querySelector('.sidebar-dropdown-header');
    const content = dropdown.querySelector('.sidebar-dropdown-content');
    
    // Check if any child is active to auto-open dropdown
    const hasActiveChild = content.querySelector('.sidebar-item.active');
    if (hasActiveChild) {
      dropdown.classList.add('open');
    }
    
    header.addEventListener('click', function() {
      const isOpen = dropdown.classList.contains('open');
      
      // Close all other dropdowns
      dropdowns.forEach(otherDropdown => {
        if (otherDropdown !== dropdown) {
          otherDropdown.classList.remove('open');
        }
      });
      
      // Toggle current dropdown
      if (isOpen) {
        dropdown.classList.remove('open');
      } else {
        dropdown.classList.add('open');
      }
    });
  });
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initSidebarDropdowns);
} else {
  initSidebarDropdowns();
}
</script>

<!-- Sidebar -->
<aside id="sidebar" class="sidebar w-64 h-screen fixed left-0 top-16 shadow-xl overflow-y-auto">
  <div class="py-6">
    <!-- Dashboard -->
    <div class="mb-2">
      <a href="/" class="sidebar-item <%= typeof currentPath !== 'undefined' && (currentPath === '/' || currentPath === '/dashboard' || currentPath.includes('dashboard')) ? 'active' : '' %>">
        <i class="fas fa-home"></i>
        <span class="ml-3 font-medium">Dashboard</span>
      </a>
    </div>
    
    <!-- Master Data Section -->
    <div class="sidebar-dropdown">
      <div class="sidebar-dropdown-header">
        <div class="flex items-center">
          <i class="fas fa-database mr-2 text-slate-600"></i>
          <span>Master Data</span>
        </div>
        <i class="fas fa-chevron-down sidebar-dropdown-arrow"></i>
      </div>
      
      <div class="sidebar-dropdown-content">
        <a href="/branches" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/branches') ? 'active' : '' %>">
          <i class="fas fa-building text-slate-500"></i>
          <span class="ml-3 font-medium">Cabang</span>
        </a>
        
        <a href="/categories" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/categories') ? 'active' : '' %>">
          <i class="fas fa-tags text-slate-500"></i>
          <span class="ml-3 font-medium">Kategori</span>
        </a>
        
        <a href="/jenis-barang" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/jenis-barang') ? 'active' : '' %>">
          <i class="fas fa-box text-slate-500"></i>
          <span class="ml-3 font-medium">Jenis Barang</span>
        </a>
        
        <a href="/suppliers" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/suppliers') ? 'active' : '' %>">
          <i class="fas fa-truck text-slate-500"></i>
          <span class="ml-3 font-medium">Supplier</span>
        </a>

        <a href="/barang" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/barang') ? 'active' : '' %>">
          <i class="fas fa-cube text-slate-500"></i>
          <span class="ml-3 font-medium">Data Barang</span>
        </a>
      </div>
    </div>
    
    <!-- Warehouse Section -->
    <div class="sidebar-dropdown">
      <div class="sidebar-dropdown-header">
        <div class="flex items-center">
          <i class="fas fa-warehouse mr-2 text-slate-600"></i>
          <span>Warehouse</span>
        </div>
        <i class="fas fa-chevron-down sidebar-dropdown-arrow"></i>
      </div>
      
      <div class="sidebar-dropdown-content">
        <a href="/warehouse/locations" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/warehouse/locations') ? 'active' : '' %>">
          <i class="fas fa-warehouse text-slate-500"></i>
          <span class="ml-3 font-medium">Lokasi Gudang</span>
        </a>
        
        <a href="/warehouse/racks" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/warehouse/racks') ? 'active' : '' %>">
          <i class="fas fa-layer-group text-slate-500"></i>
          <span class="ml-3 font-medium">Rak</span>
        </a>
        
        <a href="/warehouse/bins" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/warehouse/bins') ? 'active' : '' %>">
          <i class="fas fa-inbox text-slate-500"></i>
          <span class="ml-3 font-medium">Bin</span>
        </a>
        
        <a href="/stock" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath === '/stock' ? 'active' : '' %>">
          <i class="fas fa-cubes text-slate-500"></i>
          <span class="ml-3 font-medium">Stok Barang</span>
        </a>
      </div>
    </div>
    
    <!-- Transaksi Section -->
    <div class="sidebar-dropdown">
      <div class="sidebar-dropdown-header">
        <div class="flex items-center">
          <i class="fas fa-exchange-alt mr-2 text-slate-600"></i>
          <span>Transaksi</span>
        </div>
        <i class="fas fa-chevron-down sidebar-dropdown-arrow"></i>
      </div>
      
      <div class="sidebar-dropdown-content">
        <a href="/incoming" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/incoming') ? 'active' : '' %>">
          <i class="fas fa-arrow-down icon-green"></i>
          <span class="ml-3 font-medium">Barang Masuk</span>
        </a>
        
        <a href="/outgoing" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/outgoing') ? 'active' : '' %>">
          <i class="fas fa-arrow-up icon-red"></i>
          <span class="ml-3 font-medium">Barang Keluar</span>
        </a>
        
        <a href="/transfer" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/transfer') ? 'active' : '' %>">
          <i class="fas fa-exchange-alt icon-blue"></i>
          <span class="ml-3 font-medium">Transfer Barang</span>
        </a>
        
        <a href="/opname" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/opname') ? 'active' : '' %>">
          <i class="fas fa-clipboard-check icon-purple"></i>
          <span class="ml-3 font-medium">Stock Opname</span>
        </a>
      </div>
    </div>
    
    <!-- Jamaah & Pengiriman Section -->
    <div class="sidebar-dropdown">
      <div class="sidebar-dropdown-header">
        <div class="flex items-center">
          <i class="fas fa-users mr-2 text-slate-600"></i>
          <span>Jamaah & Pengiriman</span>
        </div>
        <i class="fas fa-chevron-down sidebar-dropdown-arrow"></i>
      </div>
      
      <div class="sidebar-dropdown-content">
        <a href="/jamaah/kelengkapan" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/jamaah/kelengkapan') ? 'active' : '' %>">
          <i class="fas fa-user-check text-slate-500"></i>
          <span class="ml-3 font-medium">Kelengkapan Jamaah</span>
        </a>
        
        <a href="/jamaah/request" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/jamaah/request') ? 'active' : '' %>">
          <i class="fas fa-envelope-open-text text-slate-500"></i>
          <span class="ml-3 font-medium">Request Perlengkapan</span>
        </a>
        
        <a href="/jamaah/pengiriman" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/jamaah/pengiriman') ? 'active' : '' %>">
          <i class="fas fa-shipping-fast text-slate-500"></i>
          <span class="ml-3 font-medium">Pengiriman</span>
        </a>
        
        <a href="/jamaah/rekap-ongkir" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/jamaah/rekap-ongkir') ? 'active' : '' %>">
          <i class="fas fa-money-bill-wave text-slate-500"></i>
          <span class="ml-3 font-medium">Rekap Ongkir</span>
        </a>
      </div>
    </div>
    
    <!-- Laporan Section -->
    <div class="sidebar-dropdown">
      <div class="sidebar-dropdown-header">
        <div class="flex items-center">
          <i class="fas fa-chart-line mr-2 text-slate-600"></i>
          <span>Laporan</span>
        </div>
        <i class="fas fa-chevron-down sidebar-dropdown-arrow"></i>
      </div>
      
      <div class="sidebar-dropdown-content">
        <a href="/stock/movements" class="sidebar-item <%= typeof currentPath !== 'undefined' && currentPath.includes('/stock/movements') ? 'active' : '' %>">
          <i class="fas fa-history text-slate-500"></i>
          <span class="ml-3 font-medium">Histori Pergerakan</span>
        </a>
      </div>
    </div>
    
    <!-- Bottom Spacing -->
    <div class="h-6"></div>
  </div>
</aside>
